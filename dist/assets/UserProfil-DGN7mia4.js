import{d as N,g as f,s as b,e as g,f as v,a as E,b as c,r as o,R as e,u as h,h as k}from"./index-BcaX_HEL.js";const U=(a,r)=>async n=>{try{await N(a,r);const t=await f(a);n(b(t)),n(g(t.userName))}catch(t){console.error("Erreur mise Ã  jour pseudo :",t.message),n(v(t.message))}};function w({setEditMode:a}){const r=E(),n=c(l=>l.auth.token),{userName:t,firstName:u,lastName:m,loading:s}=c(l=>l.profile||{}),[i,d]=o.useState(t||"");if(s)return e.createElement("p",null,"Chargement du profil...");const p=l=>{l.preventDefault(),r(U(n,i)),a(!1)};return e.createElement("div",{className:"edit-container"},e.createElement("h2",{className:"edit-title"},"Edit user info"),e.createElement("form",{className:"edit-form",onSubmit:p},e.createElement("div",{className:"input-group"},e.createElement("label",null,"User name:"),e.createElement("input",{type:"text",value:i,onChange:l=>d(l.target.value),required:!0})),e.createElement("div",{className:"input-group"},e.createElement("label",null,"First name:"),e.createElement("input",{type:"text",value:u,disabled:!0})),e.createElement("div",{className:"input-group"},e.createElement("label",null,"Last name:"),e.createElement("input",{type:"text",value:m,disabled:!0})),e.createElement("div",{className:"button-group"},e.createElement("button",{type:"submit",className:"btn-save"},"Save"),e.createElement("button",{type:"button",onClick:()=>a(!1),className:"btn-cancel"},"Cancel"))))}function C(){const a=c(s=>s.auth.user),r=c(s=>s.auth.token);c(s=>s.profile);const n=E(),t=h(),[u,m]=o.useState(!1);return o.useEffect(()=>{r?n(k(r)):t("/login")},[n,t,r]),a?e.createElement(e.Fragment,null,e.createElement("main",{className:"main bg-dark"},e.createElement("div",{className:"header"},u?e.createElement(w,{setEditMode:m}):e.createElement(e.Fragment,null,e.createElement("h1",null,"Welcome back",e.createElement("br",null),a.firstName," ",a.lastName,"!"),e.createElement("button",{className:"edit-button",onClick:()=>m(!0)},"Edit Name")))),e.createElement("section",{className:"account"},e.createElement("div",{className:"account-content-wrapper"},e.createElement("h3",{className:"account-title"},"Argent Bank Checking (x8349)"),e.createElement("p",{className:"account-amount"},"$2,082.79"),e.createElement("p",{className:"account-amount-description"},"Available Balance")),e.createElement("div",{className:"account-content-wrapper cta"},e.createElement("button",{className:"transaction-button"},"View transactions")))):e.createElement("p",null,"Chargement...")}export{C as default};
