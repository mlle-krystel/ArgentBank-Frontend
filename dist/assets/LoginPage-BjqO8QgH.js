import{r as n,u as g,a as b,R as e,l as f}from"./index-Dru0s6rc.js";function v(){const[o,m]=n.useState(""),[l,p]=n.useState(""),[i,r]=n.useState(""),u=g(),d=b(),h=async t=>{t.preventDefault();try{const a=await fetch("http://localhost:3001/api/v1/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:l})}),s=await a.json();if(a.ok){const c=await fetch("http://localhost:3001/api/v1/user/profile",{method:"POST",headers:{Authorization:`Bearer ${s.body.token}`,"Content-Type":"application/json"}}),E=await c.json();c.ok?(d(f({token:s.body.token,user:E.body})),u("/profile")):r("Impossible de récupérer le profil utilisateur")}else r(s.message||"Email ou mot de passe incorrect")}catch(a){r("Erreur serveur : "+a.message)}};return e.createElement(e.Fragment,null,e.createElement("main",{className:"main bg-dark"},e.createElement("section",{className:"sign-in-content"},e.createElement("i",{className:"fa fa-user-circle sign-in-icon"}),e.createElement("h1",null,"Sign In"),e.createElement("form",{onSubmit:h},e.createElement("div",{className:"input-wrapper"},e.createElement("label",{htmlFor:"email"},"Username"),e.createElement("input",{type:"text",id:"email",value:o,onChange:t=>m(t.target.value),autoComplete:"username",required:!0})),e.createElement("div",{className:"input-wrapper"},e.createElement("label",{htmlFor:"password"},"Password"),e.createElement("input",{type:"password",id:"password",value:l,onChange:t=>p(t.target.value),autoComplete:"current-password",required:!0})),e.createElement("div",{className:"input-remember"},e.createElement("input",{type:"checkbox",id:"remember-me"}),e.createElement("label",{htmlFor:"remember-me"},"Remember me")),i&&e.createElement("p",{style:{color:"red"}},i),e.createElement("button",{className:"sign-in-button",type:"submit"},"Sign In")))))}export{v as default};
